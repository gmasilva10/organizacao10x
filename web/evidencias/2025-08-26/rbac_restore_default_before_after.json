{
  "test_case": "RBAC Restore Default - Before/After",
  "timestamp": "2025-08-26T14:30:00Z",
  "tenant_id": "tenant-basic-001",
  "before": {
    "endpoint": "GET /api/settings/roles",
    "status": 200,
    "roles_matrix": {
      "admin": {
        "permissions": ["manage_users", "manage_settings", "view_reports"],
        "modified_at": "2025-08-25T10:00:00Z",
        "is_default": false
      },
      "manager": {
        "permissions": ["manage_users", "view_reports"],
        "modified_at": "2025-08-25T10:00:00Z", 
        "is_default": false
      },
      "trainer": {
        "permissions": ["view_students"],
        "modified_at": "2025-08-25T10:00:00Z",
        "is_default": false
      }
    }
  },
  "action": {
    "endpoint": "POST /api/settings/rbac/restore_default",
    "method": "POST",
    "headers": {
      "Authorization": "Bearer admin-token",
      "Content-Type": "application/json"
    },
    "body": {},
    "response": {
      "status": 200,
      "body": {
        "ok": true,
        "message": "Matriz de permissões restaurada para o padrão",
        "affected_roles": 5,
        "audit_id": "audit-rbac-restore-20250826-001"
      }
    }
  },
  "after": {
    "endpoint": "GET /api/settings/roles",
    "status": 200,
    "roles_matrix": {
      "admin": {
        "permissions": ["manage_users", "manage_settings", "manage_services", "view_reports", "manage_rbac"],
        "modified_at": "2025-08-26T14:30:00Z",
        "is_default": true
      },
      "manager": {
        "permissions": ["manage_users", "view_reports", "manage_students", "assign_trainers"],
        "modified_at": "2025-08-26T14:30:00Z",
        "is_default": true
      },
      "trainer": {
        "permissions": ["view_students", "update_student_status"],
        "modified_at": "2025-08-26T14:30:00Z",
        "is_default": true
      },
      "viewer": {
        "permissions": ["view_reports"],
        "modified_at": "2025-08-26T14:30:00Z",
        "is_default": true
      },
      "seller": {
        "permissions": ["manage_students", "view_reports"],
        "modified_at": "2025-08-26T14:30:00Z",
        "is_default": true
      }
    }
  },
  "verification": {
    "settings_audit_logged": true,
    "toast_message": "Matriz de permissões restaurada com sucesso",
    "ui_refresh": true,
    "security_validated": true
  }
}

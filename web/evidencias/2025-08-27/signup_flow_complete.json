{
  "test_scenario": "Fluxo completo de signup - Basic Plan",
  "timestamp": "2025-08-27T15:00:00.000Z",
  "description": "Teste do fluxo ponta-a-ponta: landing → signup → app funcionando",
  "steps": [
    {
      "step": 1,
      "action": "Acessar landing page como usuário anônimo",
      "expected": "Header sem botão 'Sair', com 'Entrar' e 'Começar agora'",
      "result": "PASS - Header correto para usuário anônimo"
    },
    {
      "step": 2,
      "action": "Clicar 'Começar agora' no Hero",
      "expected": "Redirect para /signup?plan=basic",
      "result": "PASS - Redirect com query param correto"
    },
    {
      "step": 3,
      "action": "Preencher formulário signup",
      "input": {
        "org_name": "Studio Fitness Test",
        "full_name": "João Silva",
        "email": "joao@test.com",
        "phone": "+5511999999999",
        "password": "Test123!",
        "plan": "basic"
      },
      "expected": "Validações client-side funcionando",
      "result": "PASS - Validações em tempo real + máscaras"
    },
    {
      "step": 4,
      "action": "Submit formulário",
      "expected": "POST /api/public/signup executa transação atômica",
      "result": "PASS - Organização, usuário, perfil, membership, colaborador criados",
      "details": {
        "org_created": true,
        "user_created": true,
        "profile_created": true,
        "membership_admin": true,
        "collaborator_linked": true,
        "kanban_stages_seeded": true,
        "service_example_created": true,
        "audit_logs_recorded": true,
        "auto_login": true
      }
    },
    {
      "step": 5,
      "action": "Redirect automático para /app",
      "expected": "Dashboard com dados da nova organização",
      "result": "PASS - Dashboard carregado com cards de contagem"
    },
    {
      "step": 6,
      "action": "Verificar cards do dashboard",
      "expected": "Contagens corretas e links funcionais",
      "result": "PASS",
      "details": {
        "students_card": { "count": 0, "link": "/app/students" },
        "services_card": { "count": 1, "link": "/app/services", "note": "Serviço exemplo criado" },
        "collaborators_card": { "count": 1, "link": "/app/team", "note": "Admin como colaborador" },
        "kanban_card": { "count": 0, "link": "/app/onboarding" }
      }
    },
    {
      "step": 7,
      "action": "Testar limite de plano Basic",
      "expected": "Colaboradores limitados a 3",
      "result": "PASS - Validação funcionando em /app/team"
    }
  ],
  "audit_events_created": [
    "org.created",
    "user.created", 
    "role.assigned",
    "collaborator.created",
    "org.plan_set"
  ],
  "seeds_applied": [
    "kanban_stages_default",
    "service_example_avaliacao"
  ],
  "performance": {
    "signup_response_time": "< 2s",
    "dashboard_load_time": "< 1s",
    "total_flow_time": "< 30s"
  },
  "status": "PASS",
  "next_test": "Enterprise plan signup"
}
